# ============================================
# HR Command Center - Python Agents Dockerfile
# ============================================
# Container for scheduled Python automation agents

FROM python:3.11-slim AS base

# Install system dependencies
RUN apt-get update && apt-get install -y \
    curl \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy Python dependencies file
COPY requirements.txt .

# Install Python packages
RUN pip install --no-cache-dir -r requirements.txt

# Copy agents and integrations
COPY agents ./agents
COPY integrations ./integrations

# Create logs directory
RUN mkdir -p /app/logs && chmod 755 /app/logs

# Run as non-root user
RUN useradd -m -u 1001 agent && \
    chown -R agent:agent /app

USER agent

# Default command (override in docker-compose for specific agents)
CMD ["python", "-m", "agents.new-hire-onboarding.agent"]
